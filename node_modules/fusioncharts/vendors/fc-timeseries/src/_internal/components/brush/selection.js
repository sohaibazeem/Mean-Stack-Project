import{SmartRenderer}from'../../../../../fc-core/src/component-interface';import{getTouchEvent,toRaphaelColor}from'./../../../../../fc-core/src/lib';const COLOR_FDFDFD='#fdfdfd',COLOR_F7FFFE='#f7fffe',COLOR_E3E3E3='#e3e3e3',M='M',v='v',h='h';class Selection extends SmartRenderer{constructor(){super(),this._dimensions={}}__setDefaultConfig(){super.__setDefaultConfig(),this.config.defaultStyle={fill:toRaphaelColor({FCcolor:{color:'#fdfdfd,#f7fffe',ratio:'0,100',angle:90,alpha:'50,50'}}),stroke:COLOR_E3E3E3,"stroke-width":1,opacity:.5,"fill-opacity":1,cursor:'move'}}configureAttributes(a={}){super.configureAttributes(a);let b=this,c=b.config,d=a.selectionStyle,e=c.defaultStyle;c.style=Object.assign({},e,d),c.orientation=a.orientation}setDimension(a){this._dimensions=a}getDimension(){return this._dimensions}attachHandlers(){let a,b,c,d,f,e=this,g=e.getFromEnv('animationManager'),h=e.getLinkedParent(),i=h.getFromEnv('timeNavigator');e.addEventListener('fc-dragstart',e.dragstartHandler||(e.dragstartHandler=function(c){b=getTouchEvent(c).clientX,a=h.getCurrentBrushDimensions()})),e.addEventListener('fc-dragmove',e.dragmoveHandler||(e.dragmoveHandler=function(h){g.setAnimationState('timenavScroll'),c=getTouchEvent(h).clientX-b,d=a.x+c,f=a.x+c+a.width,i.validateDomain([d,f])}))}draw(){var a=Math.max;let b=this,c=b.config,d=c.style,e=b.getDimension();b.addGraphicalElement({el:'rect',attr:{x:e.x,y:e.y,width:a(e.width,0),height:a(e.height,0),opacity:d.opacity},css:d,id:'selectionBox',label:'selectionBox',component:b,container:{id:'brushGroup',label:'brushGroup',isParent:!0}}),b.addGraphicalElement({el:'path',attr:{path:[M,e.x,e.y,v,e.height,h,e.width,v,-e.height],stroke:d.stroke,fill:'none',"stroke-width":d['stroke-width']},id:'selectionBoxBorder',label:'selectionBoxBorder',css:{cursor:'move'},component:b,container:{id:'brushGroup',label:'brushGroup',isParent:!0}})}}export default Selection;