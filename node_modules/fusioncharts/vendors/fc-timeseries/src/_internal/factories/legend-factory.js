import Legend from'../../../../fc-charts/src/_internal/components/legend/discrete';import{componentFactory,pluck,convertColor,pluckNumber}from'../../../../fc-core/src/lib';const COLOR_5F5F5F='#5f5f5f';export default(a=>{let b,c=a.getFromEnv('dataSource'),d=a.getFromEnv('getStyleDef'),e=c.legend,f=a.config.showLegend,g=d(e&&e.item&&e.item.style&&e.item.style.text),h=g.color=pluck(g.fill,COLOR_5F5F5F),i=pluckNumber(g.opacity,1),j=pluckNumber(g['fill-opacity'],1);if(f){componentFactory(a,Legend,'legend',1,[{drawcustomlegendicon:1,legendiconsides:4,alignlegendwithcanvas:1,legendborderthickness:0,legendiconscale:1.3,legendbgalpha:0,legendFontColor:h,style:{text:g}}]),b=a.getChildren('legend')[0],a.addToEnv('legend',b),b.setStateCosmetics('hover',function(a,b){return b.hasState('hidden')||(!a.text&&(a.text={}),a.text.fill=convertColor(h,100*(i*j)),a.text.cursor='inherit'),a});const c=(b={})=>{for(const d in b)if(b.hasOwnProperty(d)){const e=b[d];e.hasOwnProperty('visibility')?a._addLegend(e):c(e)}};c(a.getFromEnv('legendMap'))}else(b=a.getChildren('legend')&&a.getChildren('legend')[0])&&b.remove()});